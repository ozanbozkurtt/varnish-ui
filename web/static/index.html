<!DOCTYPE html>
<html>
<head>
    <title>Varnish Cache Statistics</title>
    <script>
        async function fetchStats() {
            const response = await fetch('/stats');
            const data = await response.json();
            document.getElementById('clientReq').innerText = data.client_req;
            document.getElementById('cacheHit').innerText = data.cache_hit;
            document.getElementById('cacheHitGrace').innerText = data.cache_hit_grace;
            document.getElementById('cacheMiss').innerText = data.cache_miss;
            document.getElementById('uncacheable').innerText = data.uncacheable;
        }

        setInterval(fetchStats, 5000);
        window.onload = fetchStats;
    </script>
</head>
<body>
    <h1>Varnish Cache Statistics</h1>
    <p><strong>Total Requests:</strong> <span id="clientReq"></span></p>
    <p><strong>Cache Hits:</strong> <span id="cacheHit"></span></p>
    <p><strong>Cache Hits (Grace):</strong> <span id="cacheHitGrace"></span></p>
    <p><strong>Cache Misses:</strong> <span id="cacheMiss"></span></p>
    <p><strong>Uncacheable Responses:</strong> <span id="uncacheable"></span></p>
</body>
</html>
